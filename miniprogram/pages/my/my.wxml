<view class="my-page">
  <view class="section-title">我的收藏</view>
  <view class="filter-bar">
    <view class="search-box">
      <input class="search-input" placeholder="搜索姓名、学院、方向" confirm-type="search" bindconfirm="onSearch" bindinput="onInput" value="{{keyword}}"/>
      <button class="search-btn" size="mini" bindtap="onSearch">搜索</button>
    </view>
    <scroll-view class="tag-scroll" scroll-x>
      <view class="tag {{activeTag==='全部'?'active':''}}" data-tag="全部" bindtap="onTagTap">全部</view>
      <block wx:for="{{allTags}}" wx:key="item">
        <view class="tag {{activeTag===item?'active':''}}" data-tag="{{item}}" bindtap="onTagTap">{{item}}</view>
      </block>
    </scroll-view>
  </view>

    <view class="sort-bar">
    <view class="sort-item {{sortBy==='time'?'active':''}}" data-key="time" bindtap="onSort">按时间</view>
  </view>

  <block wx:if="{{list.length}}">
    <block wx:for="{{list}}" wx:key="profId">
      <view class="fav-card">
        <view class="row">
          <text class="name">{{item.name}}</text>
        </view>
        <view class="school">{{item.school}}</view>
        <view class="areas">
          <block wx:for="{{item.areas}}" wx:for-item="area" wx:for-index="areaIdx" wx:key="areaIdx">
            <text class="tag-pill">{{area}}</text>
          </block>
        </view>
        <view class="contact-info">
          <view class="contact-item" wx:if="{{item.email}}">
            <text class="contact-label">邮箱：</text>
            <text class="contact-link" user-select="true">{{item.email}}</text>
          </view>
          <view class="contact-item" wx:if="{{item.homepage}}">
            <text class="contact-label">主页：</text>
            <text class="contact-link" user-select="true">{{item.homepage}}</text>
          </view>
        </view>
        <view class="ops">
          <button size="mini" class="del-btn" data-id="{{item.profId}}" bindtap="onDelete">删除</button>
        </view>
      </view>
    </block>
  </block>
  <view wx:else class="empty">暂无收藏</view>
</view> 